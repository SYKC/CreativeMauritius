/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmory imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmory exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		Object.defineProperty(exports, name, {
/******/ 			configurable: false,
/******/ 			enumerable: true,
/******/ 			get: getter
/******/ 		});
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

eval("var FirepadUserList = (function() {\r\n    function FirepadUserList(ref, place, userId, displayName) {\r\n        if (!(this instanceof FirepadUserList)) {\r\n            return new FirepadUserList(ref, place, userId, displayName);\r\n        }\r\n\r\n        this.ref_ = ref;\r\n        this.userId_ = userId;\r\n        this.place_ = place;\r\n        this.firebaseCallbacks_ = [];\r\n\r\n        var self = this;\r\n        this.hasName_ = !!displayName;\r\n        this.displayName_ = displayName || 'Guest ' + Math.floor(Math.random() * 1000);\r\n        this.firebaseOn_(ref.root.child('.info/connected'), 'value', function(s) {\r\n            if (s.val() === true && self.displayName_) {\r\n                var nameRef = ref.child(self.userId_).child('name');\r\n                nameRef.onDisconnect().remove();\r\n                nameRef.set(self.displayName_);\r\n            }\r\n        });\r\n\r\n        this.userList_ = this.makeUserList_()\r\n        place.appendChild(this.userList_);\r\n    }\r\n\r\n    // This is the primary \"constructor\" for symmetry with Firepad.\r\n    FirepadUserList.fromDiv = FirepadUserList;\r\n\r\n    FirepadUserList.prototype.dispose = function() {\r\n        this.removeFirebaseCallbacks_();\r\n        this.ref_.child(this.userId_).child('name').remove();\r\n\r\n        this.place_.removeChild(this.userList_);\r\n    };\r\n\r\n    FirepadUserList.prototype.makeUserList_ = function() {\r\n        return elt('div', [\r\n            this.makeHeading_(),\r\n            elt('div', [\r\n                this.makeUserEntryForSelf_(),\r\n                this.makeUserEntriesForOthers_()\r\n            ], { 'class': 'firepad-userlist-users' })\r\n        ], { 'class': 'firepad-userlist' });\r\n    };\r\n\r\n    FirepadUserList.prototype.makeHeading_ = function() {\r\n        var counterSpan = elt('span', '0');\r\n        this.firebaseOn_(this.ref_, 'value', function(usersSnapshot) {\r\n            setTextContent(counterSpan, \"\" + usersSnapshot.numChildren());\r\n        });\r\n\r\n        return elt('div', [\r\n            elt('span', 'ONLINE ('),\r\n            counterSpan,\r\n            elt('span', ')')\r\n        ], { 'class': 'firepad-userlist-heading' });\r\n    };\r\n\r\n    FirepadUserList.prototype.makeUserEntryForSelf_ = function() {\r\n        var myUserRef = this.ref_.child(this.userId_);\r\n\r\n        var colorDiv = elt('div', null, { 'class': 'firepad-userlist-color-indicator' });\r\n        this.firebaseOn_(myUserRef.child('color'), 'value', function(colorSnapshot) {\r\n            var color = colorSnapshot.val();\r\n            if (isValidColor(color)) {\r\n                colorDiv.style.backgroundColor = color;\r\n            }\r\n        });\r\n\r\n        var nameInput = elt('input', null, { type: 'text', 'class': 'firepad-userlist-name-input' });\r\n        nameInput.value = this.displayName_;\r\n\r\n        var nameHint = elt('div', 'ENTER YOUR NAME', { 'class': 'firepad-userlist-name-hint' });\r\n        if (this.hasName_) nameHint.style.display = 'none';\r\n\r\n        // Update Firebase when name changes.\r\n        var self = this;\r\n        on(nameInput, 'change', function(e) {\r\n            var name = nameInput.value || \"Guest \" + Math.floor(Math.random() * 1000);\r\n            myUserRef.child('name').onDisconnect().remove();\r\n            myUserRef.child('name').set(name);\r\n            nameHint.style.display = 'none';\r\n            nameInput.blur();\r\n            self.displayName_ = name;\r\n            stopEvent(e);\r\n        });\r\n\r\n        var nameDiv = elt('div', [nameInput, nameHint]);\r\n\r\n        return elt('div', [colorDiv, nameDiv], {\r\n            'class': 'firepad-userlist-user ' + 'firepad-user-' + this.userId_\r\n        });\r\n    };\r\n\r\n    FirepadUserList.prototype.makeUserEntriesForOthers_ = function() {\r\n        var self = this;\r\n        var userList = elt('div');\r\n        var userId2Element = {};\r\n\r\n        function updateChild(userSnapshot, prevChildName) {\r\n            var userId = userSnapshot.key;\r\n            var div = userId2Element[userId];\r\n            if (div) {\r\n                userList.removeChild(div);\r\n                delete userId2Element[userId];\r\n            }\r\n            var name = userSnapshot.child('name').val();\r\n            if (typeof name !== 'string') { name = 'Guest'; }\r\n            name = name.substring(0, 20);\r\n\r\n            var color = userSnapshot.child('color').val();\r\n            if (!isValidColor(color)) {\r\n                color = \"#ffb\"\r\n            }\r\n\r\n            var colorDiv = elt('div', null, { 'class': 'firepad-userlist-color-indicator' });\r\n            colorDiv.style.backgroundColor = color;\r\n\r\n            var nameDiv = elt('div', name || 'Guest', { 'class': 'firepad-userlist-name' });\r\n\r\n            var userDiv = elt('div', [colorDiv, nameDiv], {\r\n                'class': 'firepad-userlist-user ' + 'firepad-user-' + userId\r\n            });\r\n            userId2Element[userId] = userDiv;\r\n\r\n            if (userId === self.userId_) {\r\n                // HACK: We go ahead and insert ourself in the DOM, so we can easily order other users against it.\r\n                // But don't show it.\r\n                userDiv.style.display = 'none';\r\n            }\r\n\r\n            var nextElement = prevChildName ? userId2Element[prevChildName].nextSibling : userList.firstChild;\r\n            userList.insertBefore(userDiv, nextElement);\r\n        }\r\n\r\n        this.firebaseOn_(this.ref_, 'child_added', updateChild);\r\n        this.firebaseOn_(this.ref_, 'child_changed', updateChild);\r\n        this.firebaseOn_(this.ref_, 'child_moved', updateChild);\r\n        this.firebaseOn_(this.ref_, 'child_removed', function(removedSnapshot) {\r\n            var userId = removedSnapshot.key;\r\n            var div = userId2Element[userId];\r\n            if (div) {\r\n                userList.removeChild(div);\r\n                delete userId2Element[userId];\r\n            }\r\n        });\r\n\r\n        return userList;\r\n    };\r\n\r\n    FirepadUserList.prototype.firebaseOn_ = function(ref, eventType, callback, context) {\r\n        this.firebaseCallbacks_.push({ ref: ref, eventType: eventType, callback: callback, context: context });\r\n        ref.on(eventType, callback, context);\r\n        return callback;\r\n    };\r\n\r\n    FirepadUserList.prototype.firebaseOff_ = function(ref, eventType, callback, context) {\n        var this$1 = this;\n\r\n        ref.off(eventType, callback, context);\r\n        for (var i = 0; i < this.firebaseCallbacks_.length; i++) {\r\n            var l = this$1.firebaseCallbacks_[i];\r\n            if (l.ref === ref && l.eventType === eventType && l.callback === callback && l.context === context) {\r\n                this$1.firebaseCallbacks_.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    };\r\n\r\n    FirepadUserList.prototype.removeFirebaseCallbacks_ = function() {\n        var this$1 = this;\n\r\n        for (var i = 0; i < this.firebaseCallbacks_.length; i++) {\r\n            var l = this$1.firebaseCallbacks_[i];\r\n            l.ref.off(l.eventType, l.callback, l.context);\r\n        }\r\n        this.firebaseCallbacks_ = [];\r\n    };\r\n\r\n    /** Assorted helpers */\r\n\r\n    function isValidColor(color) {\r\n        return typeof color === 'string' &&\r\n            (color.match(/^#[a-fA-F0-9]{3,6}$/) || color == 'transparent');\r\n    }\r\n\r\n\r\n    /** DOM helpers */\r\n    function elt(tag, content, attrs) {\r\n        var e = document.createElement(tag);\r\n        if (typeof content === \"string\") {\r\n            setTextContent(e, content);\r\n        } else if (content) {\r\n            for (var i = 0; i < content.length; ++i) { e.appendChild(content[i]); }\r\n        }\r\n        for (var attr in (attrs || {})) {\r\n            e.setAttribute(attr, attrs[attr]);\r\n        }\r\n        return e;\r\n    }\r\n\r\n    function setTextContent(e, str) {\r\n        e.innerHTML = \"\";\r\n        e.appendChild(document.createTextNode(str));\r\n    }\r\n\r\n    function on(emitter, type, f) {\r\n        if (emitter.addEventListener) {\r\n            emitter.addEventListener(type, f, false);\r\n        } else if (emitter.attachEvent) {\r\n            emitter.attachEvent(\"on\" + type, f);\r\n        }\r\n    }\r\n\r\n    function off(emitter, type, f) {\r\n        if (emitter.removeEventListener) {\r\n            emitter.removeEventListener(type, f, false);\r\n        } else if (emitter.detachEvent) {\r\n            emitter.detachEvent(\"on\" + type, f);\r\n        }\r\n    }\r\n\r\n    function preventDefault(e) {\r\n        if (e.preventDefault) {\r\n            e.preventDefault();\r\n        } else {\r\n            e.returnValue = false;\r\n        }\r\n    }\r\n\r\n    function stopPropagation(e) {\r\n        if (e.stopPropagation) {\r\n            e.stopPropagation();\r\n        } else {\r\n            e.cancelBubble = true;\r\n        }\r\n    }\r\n\r\n    function stopEvent(e) {\r\n        preventDefault(e);\r\n        stopPropagation(e);\r\n    }\r\n\r\n    return FirepadUserList;\r\n})();//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9yZXNvdXJjZXMvYXNzZXRzL2pzL2Z1bmN0aW9ucy5qcz9kY2EzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBGaXJlcGFkVXNlckxpc3QgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICBmdW5jdGlvbiBGaXJlcGFkVXNlckxpc3QocmVmLCBwbGFjZSwgdXNlcklkLCBkaXNwbGF5TmFtZSkge1xyXG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBGaXJlcGFkVXNlckxpc3QpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmlyZXBhZFVzZXJMaXN0KHJlZiwgcGxhY2UsIHVzZXJJZCwgZGlzcGxheU5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5yZWZfID0gcmVmO1xyXG4gICAgICAgIHRoaXMudXNlcklkXyA9IHVzZXJJZDtcclxuICAgICAgICB0aGlzLnBsYWNlXyA9IHBsYWNlO1xyXG4gICAgICAgIHRoaXMuZmlyZWJhc2VDYWxsYmFja3NfID0gW107XHJcblxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB0aGlzLmhhc05hbWVfID0gISFkaXNwbGF5TmFtZTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lXyA9IGRpc3BsYXlOYW1lIHx8ICdHdWVzdCAnICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMCk7XHJcbiAgICAgICAgdGhpcy5maXJlYmFzZU9uXyhyZWYucm9vdC5jaGlsZCgnLmluZm8vY29ubmVjdGVkJyksICd2YWx1ZScsIGZ1bmN0aW9uKHMpIHtcclxuICAgICAgICAgICAgaWYgKHMudmFsKCkgPT09IHRydWUgJiYgc2VsZi5kaXNwbGF5TmFtZV8pIHtcclxuICAgICAgICAgICAgICAgIHZhciBuYW1lUmVmID0gcmVmLmNoaWxkKHNlbGYudXNlcklkXykuY2hpbGQoJ25hbWUnKTtcclxuICAgICAgICAgICAgICAgIG5hbWVSZWYub25EaXNjb25uZWN0KCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICBuYW1lUmVmLnNldChzZWxmLmRpc3BsYXlOYW1lXyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy51c2VyTGlzdF8gPSB0aGlzLm1ha2VVc2VyTGlzdF8oKVxyXG4gICAgICAgIHBsYWNlLmFwcGVuZENoaWxkKHRoaXMudXNlckxpc3RfKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUaGlzIGlzIHRoZSBwcmltYXJ5IFwiY29uc3RydWN0b3JcIiBmb3Igc3ltbWV0cnkgd2l0aCBGaXJlcGFkLlxyXG4gICAgRmlyZXBhZFVzZXJMaXN0LmZyb21EaXYgPSBGaXJlcGFkVXNlckxpc3Q7XHJcblxyXG4gICAgRmlyZXBhZFVzZXJMaXN0LnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVGaXJlYmFzZUNhbGxiYWNrc18oKTtcclxuICAgICAgICB0aGlzLnJlZl8uY2hpbGQodGhpcy51c2VySWRfKS5jaGlsZCgnbmFtZScpLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICB0aGlzLnBsYWNlXy5yZW1vdmVDaGlsZCh0aGlzLnVzZXJMaXN0Xyk7XHJcbiAgICB9O1xyXG5cclxuICAgIEZpcmVwYWRVc2VyTGlzdC5wcm90b3R5cGUubWFrZVVzZXJMaXN0XyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBlbHQoJ2RpdicsIFtcclxuICAgICAgICAgICAgdGhpcy5tYWtlSGVhZGluZ18oKSxcclxuICAgICAgICAgICAgZWx0KCdkaXYnLCBbXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1ha2VVc2VyRW50cnlGb3JTZWxmXygpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5tYWtlVXNlckVudHJpZXNGb3JPdGhlcnNfKClcclxuICAgICAgICAgICAgXSwgeyAnY2xhc3MnOiAnZmlyZXBhZC11c2VybGlzdC11c2VycycgfSlcclxuICAgICAgICBdLCB7ICdjbGFzcyc6ICdmaXJlcGFkLXVzZXJsaXN0JyB9KTtcclxuICAgIH07XHJcblxyXG4gICAgRmlyZXBhZFVzZXJMaXN0LnByb3RvdHlwZS5tYWtlSGVhZGluZ18gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgY291bnRlclNwYW4gPSBlbHQoJ3NwYW4nLCAnMCcpO1xyXG4gICAgICAgIHRoaXMuZmlyZWJhc2VPbl8odGhpcy5yZWZfLCAndmFsdWUnLCBmdW5jdGlvbih1c2Vyc1NuYXBzaG90KSB7XHJcbiAgICAgICAgICAgIHNldFRleHRDb250ZW50KGNvdW50ZXJTcGFuLCBcIlwiICsgdXNlcnNTbmFwc2hvdC5udW1DaGlsZHJlbigpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGVsdCgnZGl2JywgW1xyXG4gICAgICAgICAgICBlbHQoJ3NwYW4nLCAnT05MSU5FICgnKSxcclxuICAgICAgICAgICAgY291bnRlclNwYW4sXHJcbiAgICAgICAgICAgIGVsdCgnc3BhbicsICcpJylcclxuICAgICAgICBdLCB7ICdjbGFzcyc6ICdmaXJlcGFkLXVzZXJsaXN0LWhlYWRpbmcnIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBGaXJlcGFkVXNlckxpc3QucHJvdG90eXBlLm1ha2VVc2VyRW50cnlGb3JTZWxmXyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBteVVzZXJSZWYgPSB0aGlzLnJlZl8uY2hpbGQodGhpcy51c2VySWRfKTtcclxuXHJcbiAgICAgICAgdmFyIGNvbG9yRGl2ID0gZWx0KCdkaXYnLCBudWxsLCB7ICdjbGFzcyc6ICdmaXJlcGFkLXVzZXJsaXN0LWNvbG9yLWluZGljYXRvcicgfSk7XHJcbiAgICAgICAgdGhpcy5maXJlYmFzZU9uXyhteVVzZXJSZWYuY2hpbGQoJ2NvbG9yJyksICd2YWx1ZScsIGZ1bmN0aW9uKGNvbG9yU25hcHNob3QpIHtcclxuICAgICAgICAgICAgdmFyIGNvbG9yID0gY29sb3JTbmFwc2hvdC52YWwoKTtcclxuICAgICAgICAgICAgaWYgKGlzVmFsaWRDb2xvcihjb2xvcikpIHtcclxuICAgICAgICAgICAgICAgIGNvbG9yRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBuYW1lSW5wdXQgPSBlbHQoJ2lucHV0JywgbnVsbCwgeyB0eXBlOiAndGV4dCcsICdjbGFzcyc6ICdmaXJlcGFkLXVzZXJsaXN0LW5hbWUtaW5wdXQnIH0pO1xyXG4gICAgICAgIG5hbWVJbnB1dC52YWx1ZSA9IHRoaXMuZGlzcGxheU5hbWVfO1xyXG5cclxuICAgICAgICB2YXIgbmFtZUhpbnQgPSBlbHQoJ2RpdicsICdFTlRFUiBZT1VSIE5BTUUnLCB7ICdjbGFzcyc6ICdmaXJlcGFkLXVzZXJsaXN0LW5hbWUtaGludCcgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFzTmFtZV8pIG5hbWVIaW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBGaXJlYmFzZSB3aGVuIG5hbWUgY2hhbmdlcy5cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgb24obmFtZUlucHV0LCAnY2hhbmdlJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB2YXIgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZSB8fCBcIkd1ZXN0IFwiICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMCk7XHJcbiAgICAgICAgICAgIG15VXNlclJlZi5jaGlsZCgnbmFtZScpLm9uRGlzY29ubmVjdCgpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICBteVVzZXJSZWYuY2hpbGQoJ25hbWUnKS5zZXQobmFtZSk7XHJcbiAgICAgICAgICAgIG5hbWVIaW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIG5hbWVJbnB1dC5ibHVyKCk7XHJcbiAgICAgICAgICAgIHNlbGYuZGlzcGxheU5hbWVfID0gbmFtZTtcclxuICAgICAgICAgICAgc3RvcEV2ZW50KGUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgbmFtZURpdiA9IGVsdCgnZGl2JywgW25hbWVJbnB1dCwgbmFtZUhpbnRdKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGVsdCgnZGl2JywgW2NvbG9yRGl2LCBuYW1lRGl2XSwge1xyXG4gICAgICAgICAgICAnY2xhc3MnOiAnZmlyZXBhZC11c2VybGlzdC11c2VyICcgKyAnZmlyZXBhZC11c2VyLScgKyB0aGlzLnVzZXJJZF9cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgRmlyZXBhZFVzZXJMaXN0LnByb3RvdHlwZS5tYWtlVXNlckVudHJpZXNGb3JPdGhlcnNfID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHZhciB1c2VyTGlzdCA9IGVsdCgnZGl2Jyk7XHJcbiAgICAgICAgdmFyIHVzZXJJZDJFbGVtZW50ID0ge307XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUNoaWxkKHVzZXJTbmFwc2hvdCwgcHJldkNoaWxkTmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgdXNlcklkID0gdXNlclNuYXBzaG90LmtleTtcclxuICAgICAgICAgICAgdmFyIGRpdiA9IHVzZXJJZDJFbGVtZW50W3VzZXJJZF07XHJcbiAgICAgICAgICAgIGlmIChkaXYpIHtcclxuICAgICAgICAgICAgICAgIHVzZXJMaXN0LnJlbW92ZUNoaWxkKGRpdik7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdXNlcklkMkVsZW1lbnRbdXNlcklkXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbmFtZSA9IHVzZXJTbmFwc2hvdC5jaGlsZCgnbmFtZScpLnZhbCgpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7IG5hbWUgPSAnR3Vlc3QnOyB9XHJcbiAgICAgICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cmluZygwLCAyMCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29sb3IgPSB1c2VyU25hcHNob3QuY2hpbGQoJ2NvbG9yJykudmFsKCk7XHJcbiAgICAgICAgICAgIGlmICghaXNWYWxpZENvbG9yKGNvbG9yKSkge1xyXG4gICAgICAgICAgICAgICAgY29sb3IgPSBcIiNmZmJcIlxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgY29sb3JEaXYgPSBlbHQoJ2RpdicsIG51bGwsIHsgJ2NsYXNzJzogJ2ZpcmVwYWQtdXNlcmxpc3QtY29sb3ItaW5kaWNhdG9yJyB9KTtcclxuICAgICAgICAgICAgY29sb3JEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3I7XHJcblxyXG4gICAgICAgICAgICB2YXIgbmFtZURpdiA9IGVsdCgnZGl2JywgbmFtZSB8fCAnR3Vlc3QnLCB7ICdjbGFzcyc6ICdmaXJlcGFkLXVzZXJsaXN0LW5hbWUnIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIHVzZXJEaXYgPSBlbHQoJ2RpdicsIFtjb2xvckRpdiwgbmFtZURpdl0sIHtcclxuICAgICAgICAgICAgICAgICdjbGFzcyc6ICdmaXJlcGFkLXVzZXJsaXN0LXVzZXIgJyArICdmaXJlcGFkLXVzZXItJyArIHVzZXJJZFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdXNlcklkMkVsZW1lbnRbdXNlcklkXSA9IHVzZXJEaXY7XHJcblxyXG4gICAgICAgICAgICBpZiAodXNlcklkID09PSBzZWxmLnVzZXJJZF8pIHtcclxuICAgICAgICAgICAgICAgIC8vIEhBQ0s6IFdlIGdvIGFoZWFkIGFuZCBpbnNlcnQgb3Vyc2VsZiBpbiB0aGUgRE9NLCBzbyB3ZSBjYW4gZWFzaWx5IG9yZGVyIG90aGVyIHVzZXJzIGFnYWluc3QgaXQuXHJcbiAgICAgICAgICAgICAgICAvLyBCdXQgZG9uJ3Qgc2hvdyBpdC5cclxuICAgICAgICAgICAgICAgIHVzZXJEaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIG5leHRFbGVtZW50ID0gcHJldkNoaWxkTmFtZSA/IHVzZXJJZDJFbGVtZW50W3ByZXZDaGlsZE5hbWVdLm5leHRTaWJsaW5nIDogdXNlckxpc3QuZmlyc3RDaGlsZDtcclxuICAgICAgICAgICAgdXNlckxpc3QuaW5zZXJ0QmVmb3JlKHVzZXJEaXYsIG5leHRFbGVtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZmlyZWJhc2VPbl8odGhpcy5yZWZfLCAnY2hpbGRfYWRkZWQnLCB1cGRhdGVDaGlsZCk7XHJcbiAgICAgICAgdGhpcy5maXJlYmFzZU9uXyh0aGlzLnJlZl8sICdjaGlsZF9jaGFuZ2VkJywgdXBkYXRlQ2hpbGQpO1xyXG4gICAgICAgIHRoaXMuZmlyZWJhc2VPbl8odGhpcy5yZWZfLCAnY2hpbGRfbW92ZWQnLCB1cGRhdGVDaGlsZCk7XHJcbiAgICAgICAgdGhpcy5maXJlYmFzZU9uXyh0aGlzLnJlZl8sICdjaGlsZF9yZW1vdmVkJywgZnVuY3Rpb24ocmVtb3ZlZFNuYXBzaG90KSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VySWQgPSByZW1vdmVkU25hcHNob3Qua2V5O1xyXG4gICAgICAgICAgICB2YXIgZGl2ID0gdXNlcklkMkVsZW1lbnRbdXNlcklkXTtcclxuICAgICAgICAgICAgaWYgKGRpdikge1xyXG4gICAgICAgICAgICAgICAgdXNlckxpc3QucmVtb3ZlQ2hpbGQoZGl2KTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB1c2VySWQyRWxlbWVudFt1c2VySWRdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB1c2VyTGlzdDtcclxuICAgIH07XHJcblxyXG4gICAgRmlyZXBhZFVzZXJMaXN0LnByb3RvdHlwZS5maXJlYmFzZU9uXyA9IGZ1bmN0aW9uKHJlZiwgZXZlbnRUeXBlLCBjYWxsYmFjaywgY29udGV4dCkge1xyXG4gICAgICAgIHRoaXMuZmlyZWJhc2VDYWxsYmFja3NfLnB1c2goeyByZWY6IHJlZiwgZXZlbnRUeXBlOiBldmVudFR5cGUsIGNhbGxiYWNrOiBjYWxsYmFjaywgY29udGV4dDogY29udGV4dCB9KTtcclxuICAgICAgICByZWYub24oZXZlbnRUeXBlLCBjYWxsYmFjaywgY29udGV4dCk7XHJcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrO1xyXG4gICAgfTtcclxuXHJcbiAgICBGaXJlcGFkVXNlckxpc3QucHJvdG90eXBlLmZpcmViYXNlT2ZmXyA9IGZ1bmN0aW9uKHJlZiwgZXZlbnRUeXBlLCBjYWxsYmFjaywgY29udGV4dCkge1xyXG4gICAgICAgIHJlZi5vZmYoZXZlbnRUeXBlLCBjYWxsYmFjaywgY29udGV4dCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmZpcmViYXNlQ2FsbGJhY2tzXy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgbCA9IHRoaXMuZmlyZWJhc2VDYWxsYmFja3NfW2ldO1xyXG4gICAgICAgICAgICBpZiAobC5yZWYgPT09IHJlZiAmJiBsLmV2ZW50VHlwZSA9PT0gZXZlbnRUeXBlICYmIGwuY2FsbGJhY2sgPT09IGNhbGxiYWNrICYmIGwuY29udGV4dCA9PT0gY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maXJlYmFzZUNhbGxiYWNrc18uc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIEZpcmVwYWRVc2VyTGlzdC5wcm90b3R5cGUucmVtb3ZlRmlyZWJhc2VDYWxsYmFja3NfID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmZpcmViYXNlQ2FsbGJhY2tzXy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgbCA9IHRoaXMuZmlyZWJhc2VDYWxsYmFja3NfW2ldO1xyXG4gICAgICAgICAgICBsLnJlZi5vZmYobC5ldmVudFR5cGUsIGwuY2FsbGJhY2ssIGwuY29udGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmlyZWJhc2VDYWxsYmFja3NfID0gW107XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiBBc3NvcnRlZCBoZWxwZXJzICovXHJcblxyXG4gICAgZnVuY3Rpb24gaXNWYWxpZENvbG9yKGNvbG9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBjb2xvciA9PT0gJ3N0cmluZycgJiZcclxuICAgICAgICAgICAgKGNvbG9yLm1hdGNoKC9eI1thLWZBLUYwLTldezMsNn0kLykgfHwgY29sb3IgPT0gJ3RyYW5zcGFyZW50Jyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKiBET00gaGVscGVycyAqL1xyXG4gICAgZnVuY3Rpb24gZWx0KHRhZywgY29udGVudCwgYXR0cnMpIHtcclxuICAgICAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcclxuICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgc2V0VGV4dENvbnRlbnQoZSwgY29udGVudCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb250ZW50KSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29udGVudC5sZW5ndGg7ICsraSkgeyBlLmFwcGVuZENoaWxkKGNvbnRlbnRbaV0pOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGF0dHIgaW4gKGF0dHJzIHx8IHt9KSkge1xyXG4gICAgICAgICAgICBlLnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyc1thdHRyXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNldFRleHRDb250ZW50KGUsIHN0cikge1xyXG4gICAgICAgIGUuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICBlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHN0cikpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uKGVtaXR0ZXIsIHR5cGUsIGYpIHtcclxuICAgICAgICBpZiAoZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgIGVtaXR0ZXIuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmLCBmYWxzZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlbWl0dGVyLmF0dGFjaEV2ZW50KSB7XHJcbiAgICAgICAgICAgIGVtaXR0ZXIuYXR0YWNoRXZlbnQoXCJvblwiICsgdHlwZSwgZik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9mZihlbWl0dGVyLCB0eXBlLCBmKSB7XHJcbiAgICAgICAgaWYgKGVtaXR0ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xyXG4gICAgICAgICAgICBlbWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZiwgZmFsc2UpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZW1pdHRlci5kZXRhY2hFdmVudCkge1xyXG4gICAgICAgICAgICBlbWl0dGVyLmRldGFjaEV2ZW50KFwib25cIiArIHR5cGUsIGYpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdChlKSB7XHJcbiAgICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uKGUpIHtcclxuICAgICAgICBpZiAoZS5zdG9wUHJvcGFnYXRpb24pIHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHN0b3BFdmVudChlKSB7XHJcbiAgICAgICAgcHJldmVudERlZmF1bHQoZSk7XHJcbiAgICAgICAgc3RvcFByb3BhZ2F0aW9uKGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBGaXJlcGFkVXNlckxpc3Q7XHJcbn0pKCk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHJlc291cmNlcy9hc3NldHMvanMvZnVuY3Rpb25zLmpzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }
/******/ ]);